<!doctype html>
<html>
   <head>
      <title>WMP SVG lab</title>
      <link rel="stylesheet" href="index.css" />
      <link rel="stylesheet" href="gradient-editor.css" />
      <style>
body {
   display: grid;
   gap:     8px;
   
   grid-template:
      "full      raster    todo"
      "utilities utilities todo" 1fr
      /
      auto auto 1fr
   ;
}

.pane {
   grid-row: 1;
}
.utilities {
   grid-area: utilities;
}
#todo {
   grid-area: todo;
}
      </style>
   </head>
   <body>
      
      <!--
         Helper filters for our various tests and viewing options.
         These have to be inside of this file because referencing 
         SVG filters in separate files is broken (probably because 
         I'm running all of this locally and browsers cripple the 
         file:/// origin on purpose).
      -->
      <svg hidden>
         <defs>
            <filter id="filter-disable-alpha">
               <feColorMatrix
                  in="SourceGraphic"
                  type="matrix"
                  values="1 0 0 0 0
                          0 1 0 0 0
                          0 0 1 0 0
                          0 0 0 0 1"
               />
            </filter>
            <filter id="filter-show-alpha">
               <feColorMatrix
                  in="SourceGraphic"
                  type="matrix"
                  values="0 0 0 1 0
                          0 0 0 1 0
                          0 0 0 1 0
                          0 0 0 0 1"
               />
            </filter>
         </defs>
      </svg>
      
      <!--
         Preview areas. While drafting SVGs, I can work directly 
         in here in order to be able to use the DOM inspector on 
         SVG content directly. Once I have a design 90% done, I 
         should move it to its own file.
      -->
      <section class="view play-pause" id="preview">
         <header>
            Controllable preview
         </header>
         <div class="layer raster">
            <img id="raster-preview" width="364" height="102" />
         </div>
         <div class="layer vector">
            <!--
               TODO: Use `color-interpolation: linearrgb` on the 
               other `mask` elements, and adjust their values. 
               In general, masks that are meant to mimic the 
               alpha mask of the source graphics should use 
               linear RGB.
            -->
            <img id="play-pause-button" src="play-pause.svg" style="position:absolute; left: 166px; top: 1px" />
         </div>
         <div class="layer vector" style="display: none;">
            <svg name="next" width="104" height="102" viewBox="260 0" style="position: absolute; left: 260px">
               <defs>
                  <style>
                     path.button-shape {
                        d: path("M 4 0 l 79 0 q 15 0 15 23 q 0 23 -15 23 l -78 0 q -3 0 -3 -3 c 0 -9 4 -6 4 -20 c 0 -14 -4 -11 -4 -20 q 0 -3 3 -3 z");
                     }
                  </style>
                  <linearGradient id="next-button-base-color" x1="0" x2="0" y1="0" y2="1">
                     <stop offset="0.00" stop-color="#FFFFFF" />
                     <stop offset="0.30" stop-color="#D8ECFF" />
                     <stop offset="0.45" stop-color="#A8CCF0" />
                     <stop offset="0.50" stop-color="#1c4d8f" />
                     <stop offset="0.68" stop-color="#1c4d8f" />
                     <stop offset="0.76" stop-color="#37A" />
                     <stop offset="0.88" stop-color="#6CE" />
                  </linearGradient>
                  <linearGradient id="next-button-base-alpha" x1="0" x2="0" y1="0" y2="1">
                     <stop offset="0.00" stop-color="#B0B0B0" />
                     <stop offset="0.30" stop-color="#707070" />
                     <stop offset="0.45" stop-color="#666666" />
                     <stop offset="0.50" stop-color="#424242" />
                     <stop offset="0.60" stop-color="#333333" />
                     <stop offset="0.75" stop-color="#2C2C2C" />
                     <stop offset="1.00" stop-color="#303030" />
                  </linearGradient>
                  <linearGradient id="next-button-edge-color" x1="0" x2="1" y1="0" y2="0">
                     <stop offset="0.00" stop-color="#4AF" />
                     <stop offset="0.10" stop-color="#FFFFFF" />
                     <stop offset="0.90" stop-color="#FFFFFF" />
                     <stop offset="1.00" stop-color="#4AF" />
                  </linearGradient>
                  <mask id="next-button-alpha-mask">
                     <rect x="0" y="0" width="100%" height="100%" fill="#000" />
                     <path class="button-shape" fill="url(#next-button-base-alpha)" filter="drop-shadow(0 2px 6px #FFF8)" />
                  </mask>
                  <mask id="next-button-shadow-mask">
                     <rect x="0" y="0" width="100%" height="100%" fill="#000" />
                     <path class="button-shape" fill="#000" stroke="#CCC" stroke-width="2" filter="blur(1px)" />
                  </mask>
               </defs>
               <g mask="url(#next-button-alpha-mask)" transform="translate(0 28)">
                  <path class="button-shape" fill="#00000001" filter="drop-shadow(0 0 4px #00000080)" />
                  <path class="button-shape" fill="url(#next-button-base-color)" filter="drop-shadow(0 0 4px #00000080)" />
               </g>
               <g mask="url(#next-button-shadow-mask)" transform="translate(0 28)">
                  <path class="button-shape" transform="translate(0 1)" fill="#000" stroke-width="4" stroke="#000" />
                  <path class="button-shape" fill="url(#next-button-edge-color)" />
               </g>
            </svg>
         </div>
         <div class="layer vector">
            <img id="stop-button" src="spritesheet-generic.svg" style="position:absolute; left: -2px; top: 24px" />
         </div>
         <div class="layer vector">
            <img id="next-button" src="spritesheet-next.svg" style="position:absolute; left: 256px; top: 16px" />
         </div>
      </section>
      
      <!-- preview that dynamically responds to hover, active, etc. -->
      <section class="view active">
         <header>
            Interactive preview
         </header>
         <div class="layer vector">
            <button class="stop">Stop</button>
            <button class="prev">Previous</button>
            <button class="play-pause">Play</button>
            <button class="next">Next</button>
         </div>
      </section>
      
      <!--
         Viewing options and controls, to aid in testing and 
         comparisons.
      -->
      <section class="utilities">
         <!-- Control the play/pause icon, and the button states. -->
         <div id="button-state-select">
            <label><input type="radio" name="button-state" value="normal" checked /> Normal</label>
            <label><input type="radio" name="button-state" value="active" /> Active</label>
            <label><input type="radio" name="button-state" value="hover" />  Hover</label>
            <label><input type="radio" name="button-state" value="disabled" />  Disabled</label>
         </div>
         <label>
            Play/Pause Icon:
            <select id="play-pause-icon-select">
               <option value="play">Play</option>
               <option value="pause">Pause</option>
            </select>
         </label>
         <br/>
         
         <!-- The view is half-raster/half-vector. Cotnrol at what 
         X-coordinate we switch from the one to the other. -->
         <label>Raster:</label> <input type="range" id="raster-threshold" min="0" max="364" value="0" />
         <br/>
         
         <!-- Disable alpha masks. It's easiest to try and match the 
         color of the raster first, and then try to match the alpha. -->
         <div>
            <label>
               Filter:
               <select id="filter-picker">
                  <option>None</option>
                  <option value="disable-alpha">Disable alpha</option>
                  <option value="show-alpha">Show alpha</option>
               </select>
            </label>
         </div>
      </section>
      
      <script src="index.js"></script>
      
      <div id="todo">
         <p>
            Remaining tasks:
         </p>
         <ul>
            <li>Alpha mask for fast-forward/next icon (not the button; the icon labeling it) when the button is in the disabled state</li>
            <li>Look into separating the icons for Fast Forward and Next from their respective buttons, and putting them in their own spritesheet (with just the "enabled" and "disabled" states). It'd allow us to remove some more CSS from <code>spritesheet-next.svg</code>.</li>
            <li>Create a spritesheet for generic buttons' icons &mdash; that is, "enabled" and "disabled" states for the Stop, Shuffle, and Loop icons; as well as a separate spritesheet for the Volume icon.</li>
            <li>Look into re-doing the play/pause button using <code>color-interpolation: linearrgb</code>, and redoing it as a spritesheet.</li>
         </ul>
      </div>
   </body>
</html>